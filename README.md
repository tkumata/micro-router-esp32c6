# XIAO ESP32-C6 によるマイクロルーター

## 1. 概要

Waveshare XIAO ESP32-C6 (RISC-V) を使用したミニマルな Wi-Fi ルーターの実装です。

本プロジェクトは、ESP32-C6 MCU を使って小型の Wi-Fi ルーターを構築します。既存の Wi-Fi ネットワーク (自宅のルーターなど) に接続しながら、独自のアクセスポイントを提供し、最大 3 台のデバイスに対して NAT ルーティングを実現します。

マイコンボードのスペック不足から以下の制限があります。どうしても低速なネットワーク環境が必要な場合しか用途が思いつきません。しかし、将来的には DNS フィルタリングなど実装してハードウェアセキュリティルータにしたいと考えています。

- 通信速度は最大で 7 Mbps
- 同時接続は 3 台程度

### 主な機能

- **デュアル Wi-Fi モード**: STA (Station) モードと AP (Access Point) モードの同時動作
- **Web ベース設定画面**: 初回起動時に Web UI から上位 Wi-Fi AP の認証情報を設定可能 (ハードコード不要でセキュア)
- **NAT ルーティング**: AP 配下のデバイスから既存ネットワーク経由でインターネットへアクセス可能
- **DHCP サーバー**: 192.168.4.0/24 セグメントで自動的に IP アドレスを割り当て
- **不揮発性ストレージ**: 設定情報をマイコンボードの NVS に保存し、再起動後も保持

```text
+-----------------------------+
| Home Router                 |
| (Wi-Fi AP)                  |
+-----------------------------+
   |                  |
+--v----------+ +-----v-------+
| (Wi-Fi STA) | | (Wi-Fi STA) |
| XIAO        | | PC          |
| (Wi-Fi AP)  | +-------------+
+-------------+
   |
+--v------------+
| Other Devices |
| (Wi-Fi STA)   |
+---------------+
```

## 2. 必要なハードウェア

- Waveshare XIAO ESP32-C6 (RISC-V CPU)
- USB-C to A 変換器 (場合によっては)

### 注意点

- XIAO ESP32-C3 は ARM CPU なので、本ソースコードでは動かない
- 同様に XIAO ESP32-S2, S3, H4 は Xtensa CPU なので、本ソースコードでは動かない

## 3. 使用方法

[usage.md 参照](./docs/usage.md)

## 4. License

MIT
